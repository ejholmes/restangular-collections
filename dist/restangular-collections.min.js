/*! restangular-collections - v0.1.0 - 2013-12-23 */!function(a){"use strict";function b(a,b){var c={id:"id",methods:{create:"create",destroy:"remove"}};this.options=_.extend(c,b),this.restangularElem=a,this.models=[],this.reset()}var c=a.module("restangularCollections",["restangular"]);_.extend(b.prototype,{create:function(a){var b=this.restangularElem[this.options.methods.create];return b(a).then(_.bind(this.add,this))},destroy:function(a){var b=a[this.options.methods.destroy];return b().then(_.bind(this.remove,this))},find:function(a){var b,c=this.options.id;return b=_.isNumber(a)?function(b){return b[c]===a}:function(b){return b===a},_.find(this.models,b)||a[c]&&this.find(a[c])},at:function(a){return this.models[a]},add:function(a){var b=this.find(a);return b?b!=a&&this.replace(b,a):(this.models.push(a),this.length++),a},replace:function(b,c){a.copy(c,b)},addAll:function(b){return a.forEach(b,_.bind(this.add,this))},remove:function(a){var b=this.find(a);return b&&(this.models.splice(_.indexOf(this.models,a),1),this.length--),a},removeAll:function(b){return a.forEach(b,_.bind(this.remove,this))},reset:function(){this.models.length=0,this.length=0},getList:function(){var a=this.restangularElem.getList.apply(this.restangularElem,arguments);return a.then(_.bind(this.addAll,this))}}),c.config(["RestangularProvider",function(a){a.setOnElemRestangularized(function(a,c){return c&&(a.getCollection=function(c){c=c||{};var d=new b(a,c);return c.fetch?d.getList().then(function(){return d}):d}),a})}]),c.provider("RestangularCollection",function(){var a=b;this.setCollectionClass=function(b){a=b},this.$get=function(){return a}})}(angular);