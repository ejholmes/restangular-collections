/*! restangular-collections - v0.0.1 - 2013-12-21 */!function(a){"use strict";function b(a,b){var c={id:"id",methods:{create:"create"}};this.options=_.extend(c,b),this.restangularElem=a,this.models=[],this.reset()}var c=a.module("restangularCollections",["restangular"]);b.prototype.create=function(a){var b=this.restangularElem[this.options.methods.create];return b(a).then(_.bind(this.add,this))},b.prototype.find=function(a){var b,c=this.options.id;return b=_.isNumber(a)?function(b){return b[c]===a}:function(b){return b===a},_.find(this.models,b)||a[c]&&this.find(a[c])},b.prototype.add=function(a){var b=this.find(a);return b?b!=a&&this.replace(b,a):(this.models.push(a),this.length++,this._addReference(a)),a},b.prototype.replace=function(b,c){a.copy(c,b)},b.prototype.addAll=function(b){return a.forEach(b,_.bind(this.add,this))},b.prototype.remove=function(a){var b=this.find(a);return b&&(this.models.splice(_.indexOf(this.models,a),1),this._removeReference(b),this.length--),a},b.prototype.removeAll=function(b){return a.forEach(b,_.bind(this.remove,this))},b.prototype.reset=function(){this.models.length=0,this.length=0},b.prototype._addReference=function(a){var b=this;a.collection||(a.collection=b,a.destroy=function(){return a.remove().then(_.bind(b.remove,b))})},b.prototype._removeReference=function(a){this===a.collection&&delete a.collection},b.prototype.getList=function(){var a=this.restangularElem.getList.apply(this.restangularElem,arguments);return a.then(_.bind(this.addAll,this))},c.config(["RestangularProvider",function(a){a.setOnElemRestangularized(function(a,c){return c&&(a.getCollection=function(){return new b(a)}),a})}]),c.provider("RestangularCollection",function(){var a=b;this.setCollectionClass=function(b){a=b},this.$get=function(){return a}})}(angular);